(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{224:function(s,n,a){"use strict";a.r(n);var e=a(28),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"减少重绘与回流"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#减少重绘与回流"}},[s._v("#")]),s._v(" 减少重绘与回流")]),s._v(" "),a("h3",{attrs:{id:"css"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css"}},[s._v("#")]),s._v(" CSS")]),s._v(" "),a("ul",[a("li",[s._v("使用 "),a("code",[s._v("transform")]),s._v(" 替代 "),a("code",[s._v("top")])]),s._v(" "),a("li",[s._v("使用 "),a("code",[s._v("visibility")]),s._v(" 替换 "),a("code",[s._v("display:none")]),s._v("，因为前者只会引起重绘，后者会引发回流（改变了布局）")]),s._v(" "),a("li",[s._v("避免使用 "),a("code",[s._v("table")]),s._v(" 布局")]),s._v(" "),a("li",[s._v("尽可能在DOM树的最末端改变"),a("code",[s._v("class")]),s._v("，可以限制回流的范围，使其影响尽可能少的节点")]),s._v(" "),a("li",[s._v("避免设置多层内联样式，CSS选择符"),a("strong",[s._v("从右往左")]),s._v("匹配查找，避免节点层级过多。")]),s._v(" "),a("li",[s._v("将动画效果应用到 "),a("code",[s._v("position")]),s._v(" 属性为 "),a("code",[s._v("absolute")]),s._v(" 或 "),a("code",[s._v("fixed")]),s._v(" 的元素上，避免影响其他元素的布局，这样只是一个重绘，而不是回流")]),s._v(" "),a("li",[s._v("避免使用CSS表达式，可能会引发回流")]),s._v(" "),a("li",[s._v("将频繁重绘或者回流的节点设置为图层，图层能够阻止该节点的渲染行为影响别的节点")]),s._v(" "),a("li",[s._v("CSS3 硬件加速（GPU加速）：使用css3硬件加速，可以让"),a("code",[s._v("transform")]),s._v("、"),a("code",[s._v("opacity")]),s._v("、"),a("code",[s._v("filters")]),s._v("这些动画不会引起回流重绘 。但是对于动画的其它属性，比如"),a("code",[s._v("background-color")]),s._v("这些，还是会引起回流重绘的，不过它还是可以提升这些动画的性能。")])]),s._v(" "),a("h3",{attrs:{id:"javascript"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javascript"}},[s._v("#")]),s._v(" JavaScript")]),s._v(" "),a("ul",[a("li",[s._v("避免频繁操作样式：最好一次性重写"),a("code",[s._v("style")]),s._v("属性，或者将样式列表定义为"),a("code",[s._v("class")]),s._v("并一次性更改"),a("code",[s._v("class")]),s._v("属性。")]),s._v(" "),a("li",[s._v("避免频繁操作DOM：创建一个"),a("code",[s._v("documentFragment")]),s._v("，在它上面应用所有"),a("code",[s._v("DOM")]),s._v("操作，最好再把它添加到文档中。")]),s._v(" "),a("li",[s._v("避免频繁读取会引发回流/重绘的属性：如果确实需要多次使用，用一个变量缓存起来")]),s._v(" "),a("li",[s._v("对具有复杂动画的元素使用绝对定位：使它脱离文档流，否则会引起父元素后续元素频繁回流。")])]),s._v(" "),a("h2",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[s._v("#")]),s._v(" 参考文章")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/24",target:"_blank",rel:"noopener noreferrer"}},[s._v("介绍重绘和回流，以及如何进行优化"),a("OutboundLink")],1)])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// 防抖：用户一直触发则一直不执行，当用户停止触发delay秒后，才触发执行事件\nfunction debounce = (fn, delay) => {\n    let timer;\n    return function(...args){\n        clearTimeout(timer)\n        timer = setTimeout(() => {\n            fn.apply(this, args)\n        }, delay);    \n    }\n}\n\nfunction debounce = (fn, delay, flag) => {\n    let timer;\n    return function(...args) {\n        timer && clearTimeout(timer);\n        if (flag) {\n            if (!timer) fn.apply(this, args);\n            timer = setTimeout(() => {\n                timer = null\n            }, delay);\n        } else {\n            timer = setTimeout(() => {\n                fn.apply(this, args);\n            }, delay)\n        }\n    }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// 节流：经过指定时间（delay 秒）才触发执行一次事件\n// 时间戳版本\nconst throttleTimeStamp = function(fn, delay) {\n    let prev = 0, result;\n    return function(...args) {\n        const now = +new Date();\n        if (now - prev > delay) {\n            prev = now;\n            result = fn.apply(this, args);\n        }\n        return result;\n    }\n}\n\n// 计时器版本\nconst throttleTime = function(fn, delay) {\n    let timer, result;\n    return function(...args) {\n        if (!timer) {\n            timer = setTimout(() => {\n                timer = null;\n                fn.apply(this, args);\n            }, delay)\n        }\n    }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);