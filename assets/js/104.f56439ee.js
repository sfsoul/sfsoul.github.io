(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{233:function(t,e,o){"use strict";o.r(e);var a=o(28),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h2",{attrs:{id:"domcontentloaded-与-load-的区别？"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#domcontentloaded-与-load-的区别？"}},[t._v("#")]),t._v(" DOMContentLoaded 与 load 的区别？")]),t._v(" "),o("p",[o("strong",[t._v("当HTML文档解析完成就会触发 "),o("code",[t._v("DOMContentLoaded")]),t._v("，而所有资源加载完成之后，"),o("code",[t._v("load")]),t._v(" 事件才会被触发。")])]),t._v(" "),o("p",[o("img",{attrs:{src:"https://i.loli.net/2020/07/03/SGxer1RVhc3OBsU.png",alt:"DOMContentLoaded 与 load"}})]),t._v(" "),o("p",[t._v("标记1指向的蓝线以及标记2指向的蓝色字 "),o("code",[t._v("DOMContentLoaded:1.29s")]),t._v(" 均表示 "),o("code",[t._v("DOMContentLoaded")]),t._v(" 这个事件触发的时间。")]),t._v(" "),o("h2",{attrs:{id:"如何衡量一个网页的加载速度？"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#如何衡量一个网页的加载速度？"}},[t._v("#")]),t._v(" 如何衡量一个网页的加载速度？")]),t._v(" "),o("blockquote",[o("p",[t._v("用户有时候只需要在空白的网页上看见内容就可以了，而不需要等待所有的内容都加载出来。")])]),t._v(" "),o("p",[t._v("衡量一个网页加载速度的办法："),o("strong",[t._v("计算网页从空白到出现内容所花费的时间。")])]),t._v(" "),o("p",[t._v("如何计算这段时间："),o("strong",[t._v("就是当一个HTML文档被加载和解析完成后，"),o("code",[t._v("DOMContentLoaded")]),t._v(" 事件便会被触发。")])]),t._v(" "),o("p",[o("img",{attrs:{src:"https://i.loli.net/2020/07/03/g7rKcliGdfkJvOq.png",alt:"浏览器渲染"}})]),t._v(" "),o("p",[o("strong",[o("code",[t._v("JavaScript")]),t._v(" 可以阻塞DOM的生成，即当浏览器在解析HTML文档时，如果遇到"),o("code",[t._v("<script>")]),t._v("，便会停下对HTML文档的解析，转而去处理脚本。若脚本是内联的，浏览器会先去执行这段内联的脚本；如果是外链的，则先去加载脚本，然后执行。在处理完脚本之后，浏览器便继续解析HTML文档。")])]),t._v(" "),o("p",[t._v("总结："),o("strong",[t._v("当文档中没有脚本时，浏览器解析完文档便能触发 "),o("code",[t._v("DOMContentLoaded")]),t._v(" 事件；若文档中包含脚本，则脚本会阻塞文档的解析，而脚本需要等 CSSOM 构建完成时才能执行。在任何情况下，"),o("code",[t._v("DOMContentLoaded")]),t._v(" 的触发不需要等待图片等其他资源加载完成。")])]),t._v(" "),o("h2",{attrs:{id:"defer-与-domcontentloaded"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#defer-与-domcontentloaded"}},[t._v("#")]),t._v(" defer 与 DOMContentLoaded")]),t._v(" "),o("p",[t._v("如果 script 标签中包含 defer，那么这一块脚本将不会影响 HTML 文档的解析，而是等到 HTML 解析完成后才会执行。而 DOMContentLoaded 只有在 defer 脚本执行结束后才会被触发。 所以这意味着什么呢？HTML 文档解析不受影响，等 DOM 构建完成之后 defer 脚本执行，但脚本执行之前需要等待 CSSOM 构建完成。在 DOM、CSSOM 构建完毕，defer 脚本执行完成之后，DOMContentLoaded 事件触发。")]),t._v(" "),o("h2",{attrs:{id:"async-与-domcontentloaded"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#async-与-domcontentloaded"}},[t._v("#")]),t._v(" async 与 DOMContentLoaded")]),t._v(" "),o("p",[t._v("若 script 标签中包含 async，则 HTML 文档构建不受影响，解析完毕后，DOMContentLoaded触发而不需要等待 async 脚本执行、样式表加载等等。")]),t._v(" "),o("h2",{attrs:{id:"参考文章"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://juejin.im/post/5b2a508ae51d4558de5bd5d1",target:"_blank",rel:"noopener noreferrer"}},[t._v("再谈load 与 DOMContentLoaded"),o("OutboundLink")],1)]),t._v(" "),o("li",[o("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/25876048",target:"_blank",rel:"noopener noreferrer"}},[t._v("你不知道的 DOMContentLoaded"),o("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=n.exports}}]);