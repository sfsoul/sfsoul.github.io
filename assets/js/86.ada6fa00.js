(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{207:function(t,s,a){"use strict";a.r(s);var n=a(28),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#执行上下文的概念（execution-context）"}},[t._v("执行上下文的概念（Execution Context）")]),a("ul",[a("li",[a("a",{attrs:{href:"#执行上下文何时产生（如何产生）？"}},[t._v("执行上下文何时产生（如何产生）？")])]),a("li",[a("a",{attrs:{href:"#执行上下文的特点"}},[t._v("执行上下文的特点")])]),a("li",[a("a",{attrs:{href:"#执行栈（ecstack）"}},[t._v("执行栈（ECStack）")])]),a("li",[a("a",{attrs:{href:"#执行上下文的生命周期"}},[t._v("执行上下文的生命周期")])]),a("li",[a("a",{attrs:{href:"#相关题目"}},[t._v("相关题目")])])])]),a("li",[a("a",{attrs:{href:"#变量对象"}},[t._v("变量对象")]),a("ul",[a("li",[a("a",{attrs:{href:"#变量对象的创建过程"}},[t._v("变量对象的创建过程")])]),a("li",[a("a",{attrs:{href:"#变量对象-vo-与活动对象-ao-的区别"}},[t._v("变量对象(VO)与活动对象(AO)的区别")])]),a("li",[a("a",{attrs:{href:"#全局上下文的变量对象"}},[t._v("全局上下文的变量对象")])]),a("li",[a("a",{attrs:{href:"#关于变量声明提升和函数声明提升的理解"}},[t._v("关于变量声明提升和函数声明提升的理解")])])])]),a("li",[a("a",{attrs:{href:"#参考文章"}},[t._v("参考文章")])])])]),a("p"),t._v(" "),a("p",[a("strong",[t._v("首先明确以下几个概念：")])]),t._v(" "),a("ul",[a("li",[t._v("EC: 执行上下文（函数执行环境），Execution Context")]),t._v(" "),a("li",[t._v("ECS: 执行环境栈，Execution Context Stack")]),t._v(" "),a("li",[t._v("VO: 变量对象，Variable Object")]),t._v(" "),a("li",[t._v("AO: 活动对象，Active Object")]),t._v(" "),a("li",[t._v("scope chain: 作用域链")])]),t._v(" "),a("h2",{attrs:{id:"执行上下文的概念（execution-context）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行上下文的概念（execution-context）"}},[t._v("#")]),t._v(" 执行上下文的概念（Execution Context）")]),t._v(" "),a("blockquote",[a("p",[t._v("执行上下文可以理解为函数执行的环境。每一个函数执行时，都会给对应的函数创建一个执行环境。\n全局上下文在浏览器窗口关闭后出栈。在函数中，遇到 "),a("code",[t._v("return")]),t._v(" 能直接终止可执行代码的执行，因此会直接将当前上下文弹出栈。")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" color "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'blue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("changeColor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" anotherColor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'red'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("swapColors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" tempColor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" anotherColor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    anotherColor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    color "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tempColor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("swapColors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("changeColor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("p",[a("strong",[t._v("以上代码的执行过程：")])]),t._v(" "),a("ul",[a("li",[t._v("全局上下文入栈。")]),t._v(" "),a("li",[t._v("全局上下文入栈之后，其中的可执行代码开始执行，直到遇到了"),a("code",[t._v("changeColor()")]),t._v(",此时会激活函数"),a("code",[t._v("changeColor")]),t._v("创建它自己的执行上下文，因此第二步为"),a("code",[t._v("changeColor")]),t._v("的执行上下文入栈。")]),t._v(" "),a("li",[a("code",[t._v("changeColor")]),t._v("的上下文入栈后，控制器开始执行其中的可执行代码，遇到"),a("code",[t._v("swapColors()")]),t._v("之后又会激活一个新的执行上下文，因此第三步是"),a("code",[t._v("swapColors")]),t._v("的执行上下文入栈。")]),t._v(" "),a("li",[t._v("当在"),a("code",[t._v("swapColors")]),t._v("的可执行代码中，再没有遇到其他能生成执行上下文的情况，因此这段代码顺利执行完毕后，"),a("code",[t._v("swapColors")]),t._v("的上下文从栈中弹出。")]),t._v(" "),a("li",[a("code",[t._v("swapColors")]),t._v("的执行上下文弹出之后，继续执行"),a("code",[t._v("changeColor")]),t._v("的可执行代码，此时也没有再遇到其他执行上下文，顺利执行完毕之后弹出。这样ECStack中就只剩下全局上下文了。")]),t._v(" "),a("li",[t._v("全局上下文在浏览器窗口关闭后出栈。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/02/21/l2hKM3i6UrDLnam.png",alt:"执行上下文"}})]),t._v(" "),a("p",[t._v("再看一个例子")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("999")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" f2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[a("strong",[t._v("因为f1中的函数f2在f1的可执行代码中，并没有被调用执行。因为执行f1时，f2不会创建新的上下文，而直到result执行时，\n才创建了一个新的。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/02/21/Pt1N28ZlczryUmo.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"执行上下文何时产生（如何产生）？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行上下文何时产生（如何产生）？"}},[t._v("#")]),t._v(" 执行上下文何时产生（如何产生）？")]),t._v(" "),a("blockquote",[a("p",[t._v("每当控制器转到可执行代码的时候，就会进入一个执行上下文。执行上下文可以理解为当前代码的执行环境，它会形成一个作用域。")])]),t._v(" "),a("p",[t._v("简单概括就是："),a("strong",[t._v("当遇到可执行代码的时候就会产生一个执行上下文。")])]),t._v(" "),a("p",[a("strong",[a("code",[t._v("JS")]),t._v(" 中的运行环境大概包括三种情况：")])]),t._v(" "),a("ul",[a("li",[t._v("全局环境：JS代码运行时首先进入该环境")]),t._v(" "),a("li",[t._v("函数环境：当函数被调用执行时，会进入当前函数中执行代码")]),t._v(" "),a("li",[t._v("eval（不建议使用，忽略）")])]),t._v(" "),a("p",[t._v("所以在一个 "),a("code",[t._v("JavaScript")]),t._v(" 程序中，必定会产生多个执行上下文，"),a("code",[t._v("JavaScript")]),t._v(" 引擎会以栈的方式来处理它们。这个栈，\n被称为 "),a("strong",[t._v("函数调用栈（call stack）。栈底永远都是全局上下文，而栈顶就是当前正在执行的上下文。")])]),t._v(" "),a("h3",{attrs:{id:"执行上下文的特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行上下文的特点"}},[t._v("#")]),t._v(" 执行上下文的特点")]),t._v(" "),a("ul",[a("li",[t._v("单线程")]),t._v(" "),a("li",[t._v("同步执行，只有栈顶的上下文处于执行中，其他上下文需要等待")]),t._v(" "),a("li",[t._v("全局上下文只有唯一的一个，它在浏览器关闭时出栈")]),t._v(" "),a("li",[t._v("函数的执行上下文的个数没有限制")]),t._v(" "),a("li",[t._v("每次某个函数被调用，就会有个新的执行上下文为其创建，即使是调用的自身函数，也是一样。")])]),t._v(" "),a("h3",{attrs:{id:"执行栈（ecstack）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行栈（ecstack）"}},[t._v("#")]),t._v(" 执行栈（ECStack）")]),t._v(" "),a("blockquote",[a("p",[t._v("执行栈即调用栈，是一种拥有 LIFO（后进先出）数据结构的栈，被用来存储代码运行时创建的所有执行上下文。")])]),t._v(" "),a("p",[a("strong",[t._v("当 "),a("code",[t._v("JavaScript")]),t._v(" 引擎第一次遇到你的脚本时，会创建一个全局的执行上下文并且压入当前执行栈。每当引擎遇到一个函数调用，它会为\n该函数创建一个新的执行上下文并压入栈的顶部。引擎会执行那些执行上下文位于栈顶的函数。当该函数执行结束时，它的执行上下文从栈中弹出，\n控制流程到达当前栈中的下一个上下文。")])]),t._v(" "),a("h3",{attrs:{id:"执行上下文的生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行上下文的生命周期"}},[t._v("#")]),t._v(" 执行上下文的生命周期")]),t._v(" "),a("blockquote",[a("p",[t._v("一个执行上下文的生命周期分为两个阶段。")])]),t._v(" "),a("h4",{attrs:{id:"创建阶段（当函数被调用，但未执行任何其内部代码之前）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建阶段（当函数被调用，但未执行任何其内部代码之前）"}},[t._v("#")]),t._v(" 创建阶段（当函数被调用，但未执行任何其内部代码之前）")]),t._v(" "),a("p",[a("strong",[t._v("创建阶段，执行上下文主要会做三件事：")])]),t._v(" "),a("ul",[a("li",[t._v("创建变量对象。")]),t._v(" "),a("li",[t._v("建立作用域链")]),t._v(" "),a("li",[t._v("确定"),a("code",[t._v("this")]),t._v("指向")])]),t._v(" "),a("h4",{attrs:{id:"执行阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行阶段"}},[t._v("#")]),t._v(" 执行阶段")]),t._v(" "),a("p",[a("strong",[t._v("创建完成后，则开始执行代码，也会做三件事：")])]),t._v(" "),a("ul",[a("li",[t._v("完成变量的赋值")]),t._v(" "),a("li",[t._v("函数引用")]),t._v(" "),a("li",[t._v("执行其他代码")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/02/22/aLiIKZA52pT8Ntz.png",alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("可以将每个执行上下文抽象为一个对象，此对象具有三个属性：")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("ECObj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    scopeChain"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*变量对象（variableObject） + 所有父级执行上下文的变量对象*/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    variableObject"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*函数 arguments/参数，内部变量和函数声明*/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[a("strong",[t._v("解释器执行代码的伪逻辑")])]),t._v(" "),a("ul",[a("li",[t._v("查找调用函数的代码")]),t._v(" "),a("li",[t._v("执行代码之前，先进入创建上下文阶段：\n"),a("ul",[a("li",[t._v("初始化作用域链")]),t._v(" "),a("li",[t._v("创建变量对象：\n"),a("ul",[a("li",[t._v("创建arguments对象，检查上下文，初始化参数名称和值并创建引用的复制。")]),t._v(" "),a("li",[t._v("扫描上下文的函数声明（而非函数表达式）：\n"),a("ul",[a("li",[t._v("为发现的每一个函数，在变量对象上创建一个属性（以函数的名字作为属性），其值为指向该函数在内存中的引用。")]),t._v(" "),a("li",[t._v("若函数的名字已经存在，引用指针将被重写。")])])]),t._v(" "),a("li",[t._v("扫描上下文的变量声明：\n"),a("ul",[a("li",[t._v("为发现的每个变量声明，在变量对象上创建一个属性（即变量的名字），并且将变量的值初始化为undefined。")]),t._v(" "),a("li",[t._v("若变量的名字已经在变量对象里存在，将不会进行任何操作并继续扫描。")])])]),t._v(" "),a("li",[t._v("求出上下文内部this的值")])])])])]),t._v(" "),a("li",[t._v("激活/代码 执行阶段\n"),a("ul",[a("li",[t._v("在当前上下文上运行/解释函数代码，并随着代码一行行执行指派变量的值。")])])])]),t._v(" "),a("h3",{attrs:{id:"相关题目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关题目"}},[t._v("#")]),t._v(" 相关题目")]),t._v(" "),a("p",[t._v("很有代表性的一道关于函数执行栈的题目")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("begin: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("end: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// begin:2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// begin:1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// begin:0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// end:0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// end:1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// end:2")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/02/22/OnEtKdc9fNLTB7W.png",alt:"执行栈"}})]),t._v(" "),a("h2",{attrs:{id:"变量对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量对象"}},[t._v("#")]),t._v(" 变量对象")]),t._v(" "),a("h3",{attrs:{id:"变量对象的创建过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量对象的创建过程"}},[t._v("#")]),t._v(" 变量对象的创建过程")]),t._v(" "),a("ul",[a("li",[t._v("建立"),a("code",[t._v("arguments")]),t._v("对象：检测当前上下文中的参数，建立该对象下的属性与属性值。（函数参数）")]),t._v(" "),a("li",[a("strong",[t._v("检查当前上下文的函数声明，即使用"),a("code",[t._v("function")]),t._v("关键字声明的函数。在变量对象中以函数名建立一个属性，属性值为指向该函数所在内存地址的引用。")])]),t._v(" "),a("li",[a("strong",[t._v("检查当前上下文中的变量声明，每找到一个变量声明，就在变量对象中以变量名建立一个属性，属性值为 undefined。（若变量与函数同名，则在这个阶段，以函数值为准）")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/02/23/dg32J79icm6bGeZ.png",alt:"变量对象创建过程"}})]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// function foo")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'function foo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 20")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 执行顺序(创建阶段)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 首先将所有函数声明放入变量对象中")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'function foo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 再将所有变量声明放入变量对象中，但是因为foo已经存在同名函数。此时会以函数值为准，而不会被undefined覆盖。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// var foo = undefined;")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 执行顺序(执行阶段)")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// function foo")]),t._v("\nfoo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 会对变量对象中的属性foo重新进行一次赋值，变为20")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 20")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br")])]),a("p",[a("strong",[t._v("上面例子的真实执行顺序:")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'function foo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// var foo = undefined; ")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfoo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h3",{attrs:{id:"变量对象-vo-与活动对象-ao-的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量对象-vo-与活动对象-ao-的区别"}},[t._v("#")]),t._v(" 变量对象(VO)与活动对象(AO)的区别")]),t._v(" "),a("p",[a("strong",[t._v("其实它们都是同一个对象，只是处于执行上下文的不同生命周期。变量对象处于执行上下文的创建阶段，而活动对象则处于执行上下文的执行阶段。所以AO其实就是被激活的VO。只有处于函数调用栈栈顶的执行上下文中的\n变量对象，才会变成活动对象。")])]),t._v(" "),a("ul",[a("li",[t._v("变量对象：在JS的执行上下文中都有个对象用来存放执行上下文中可被访问但是不能被"),a("code",[t._v("delete")]),t._v("的函数标示符、形参、变量声明等。\n它们会被挂在这个对象上，对象的属性对应它们的名字，对象属性的值对应它们的值。")]),t._v(" "),a("li",[t._v("活动对象：有变量对象存每个上下文中的东西，但是它何时能被访问到呢？就是当进入一个执行上下文时，这个执行上下文中的变量对象就会被激活，\n也就是该上下文中的函数标示符、形参、变量声明就可以被访问了。")])]),t._v(" "),a("h3",{attrs:{id:"全局上下文的变量对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局上下文的变量对象"}},[t._v("#")]),t._v(" 全局上下文的变量对象")]),t._v(" "),a("blockquote",[a("p",[t._v("以浏览器中为例，全局对象为window。"),a("strong",[t._v("全局上下文有一个特殊的地方：它的变量对象就是window对象。这个特殊点在this指向\n上也同样适用，this也是指向window。")])])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 全局上下文")]),t._v("\nwindowEC "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VO")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    scopeChain"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Window\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[a("strong",[t._v("全局上下文的生命周期与程序的生命周期一致，只要程序运行不结束（关掉浏览器窗口），全局上下文就会一直存在。其他所有的上下文环境，都能直接访问全局上下文的属性。")])]),t._v(" "),a("h3",{attrs:{id:"关于变量声明提升和函数声明提升的理解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于变量声明提升和函数声明提升的理解"}},[t._v("#")]),t._v(" 关于变量声明提升和函数声明提升的理解")]),t._v(" "),a("p",[a("strong",[t._v("先说结论（执行上下文的创建过程）：")])]),t._v(" "),a("ul",[a("li",[t._v("函数声明的优先级高于变量声明，并且在定义过程中不会被变量覆盖，除非是赋值。")]),t._v(" "),a("li",[t._v("变量声明的过程中，如果在活动对象中发现已经存在相同名称的属性，则不会影响已经存在的属性。")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 函数指针")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// undefined")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("bar")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("h4",{attrs:{id:"为什么能在foo声明之前就访问它？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么能在foo声明之前就访问它？"}},[t._v("#")]),t._v(" 为什么能在foo声明之前就访问它？")]),t._v(" "),a("p",[t._v("因为在 VO 的创建阶段，函数在该阶段就已经被创建在变量对象中。所以在函数开始执行之前，foo已经被定义了。")]),t._v(" "),a("h4",{attrs:{id:"foo被声明了两次，为什么foo显示为函数而不是undefined或字符串？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#foo被声明了两次，为什么foo显示为函数而不是undefined或字符串？"}},[t._v("#")]),t._v(" foo被声明了两次，为什么foo显示为函数而不是undefined或字符串？")]),t._v(" "),a("p",[t._v("在执行上下文的创建阶段，函数声明是优先于变量被创建的。而且在变量的创建过程中，若发现VO中已经存在相同名称的属性，则不会影响已经存在的属性。\n所以对"),a("code",[t._v("foo()")]),t._v("函数的引用首先被创建在活动对象里，当运行到"),a("code",[t._v("var foo")]),t._v("时，此时发现"),a("code",[t._v("foo")]),t._v("属性名已经存在，代码什么都不做继续往下执行。")]),t._v(" "),a("h4",{attrs:{id:"为什么bar的值是undefined？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么bar的值是undefined？"}},[t._v("#")]),t._v(" 为什么bar的值是undefined？")]),t._v(" "),a("p",[a("code",[t._v("bar")]),t._v("采用的是函数表达式的方式来定义，所以"),a("code",[t._v("bar")]),t._v("实际上是一个变量，但变量的值是函数，变量在创建阶段它的值会被初始化为"),a("code",[t._v("undefined")]),t._v("，\n这也是为什么函数表达式不会被提升的原因。")]),t._v(" "),a("h2",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000009041008",target:"_blank",rel:"noopener noreferrer"}},[t._v("深入理解JavaScript执行上下文、函数堆栈、提升的概念"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MzI4NjE3MzQzNg==&mid=2649865890&idx=1&sn=345db9d600329796d5dcfc0ee7eea303&scene=19#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[t._v("变量对象"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);