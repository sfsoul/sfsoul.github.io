(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{229:function(t,r,a){"use strict";a.r(r);var s=a(28),e=Object(s.a)({},(function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"三次握手"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三次握手"}},[t._v("#")]),t._v(" 三次握手")]),t._v(" "),a("h3",{attrs:{id:"为什么需要三次握手？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么需要三次握手？"}},[t._v("#")]),t._v(" 为什么需要三次握手？")]),t._v(" "),a("p",[t._v("客户端和服务端通信前要进行连接，三次握手的作用是："),a("strong",[t._v("双方都能明确自己和对方的收、发能力是正常的。")])]),t._v(" "),a("ul",[a("li",[t._v("第一次握手："),a("strong",[t._v("客户端发送网络包，服务端收到了。服务端能得出结论：客户端的发送能力、服务端的接收能力是正常的。")])]),t._v(" "),a("li",[t._v("第二次握手："),a("strong",[t._v("服务端发包，客户端收到了。客户端得出结论：服务端的接收、发送能力，客户端的接收、发送能力是正常的。从客户端的视角来看，我接收到了服务端发送过来的响应数据包，说明服务端接收到了我在第一次握手时发送的网络包，并且成功发送了响应数据包，这就说明：服务端的接收、发送能力正常。而另一方面我收到了服务端的响应数据包，说明我第一次发送的网络包成功到达服务端，即我自己的发送和接收能力也是正常的。")])]),t._v(" "),a("li",[t._v("第三次握手："),a("strong",[t._v("客户端发包，服务端收到了。服务端能得出结论：客户端的接收、发送能力，服务端的发送、接收能力是正常的。第一、二次握手后，服务端并不知道客户端的接受能力以及自己的发送能力是否正常。而在第三次握手时，服务端收到了客户端对第二次握手作的回应。从服务端的角度，我在第二次握手时的响应数据发送出去了，客户端接收到了。所以我的发送能力是正常的，而客户端的接收能力也是正常的。")])])]),t._v(" "),a("p",[t._v("经过上面三次握手的过程，客户端和服务端都能确认了自己的接收、发送能力是正常的，之后就可以正常通信了。")]),t._v(" "),a("h2",{attrs:{id:"四次挥手"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四次挥手"}},[t._v("#")]),t._v(" 四次挥手")]),t._v(" "),a("p",[t._v("TCP连接是双向传输的对等的模式，即双方都可以同时向对方发送或接收数据。当有一方要关闭连接时，会发送指令告知对方，我要关闭连接了。此时对方会回一个ACK，此时一个方向的连接关闭。但是另一个方向仍然可以继续传输数据，等到发送完了所有的数据后，会发送一个FIN段来关闭此方向上的连接。接收方发送ACK确认关闭连接。"),a("strong",[t._v('注意：接收到FIN报文的一方只能回复一个ACK，它是无法立马返回对方一个FIN报文段的，因为结束数据传输的指令是上层应用层给出的，它只是一个搬运工，无法了解"上层的意志"。')])]),t._v(" "),a("h2",{attrs:{id:"为什么建立连接是三次握手，而关闭连接却是四次挥手呢？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么建立连接是三次握手，而关闭连接却是四次挥手呢？"}},[t._v("#")]),t._v(" 为什么建立连接是三次握手，而关闭连接却是四次挥手呢？")]),t._v(" "),a("p",[a("strong",[t._v("因为服务端在LISTEN状态下，收到建立连接请求的SYN报文后，把ACK和SYN放在一个报文里发送给客户端。而关闭连接时，当收到对方的FIN报文时，仅仅表示对方不再发送数据了但是还能接收数据，己方是否现在关闭数据通道，需要上层应用来决定。因此己方ACK和FIN一般都会分开发送。")])]),t._v(" "),a("h2",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/53374516",target:"_blank",rel:"noopener noreferrer"}},[t._v("“三次握手，四次挥手”你真的懂吗？"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);r.default=e.exports}}]);